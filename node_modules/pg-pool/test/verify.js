'use strict'
const expect = require('expect.js')

const describe = require('mocha').describe
const it = require('mocha').it

const Pool = require('../')

describe('verify', () => {
<<<<<<< HEAD
<<<<<<< HEAD
  it('verifies a client with a callback', false, (done) => {
    const pool = new Pool({
      verify: (client, cb) => {
        client.release()
        cb(new Error('nope'))
      }
=======
=======
>>>>>>> 60e4365cdd99277edacce2bf8c629e1668cfac86
  it('verifies a client with a callback', (done) => {
    const pool = new Pool({
      verify: (client, cb) => {
        cb(new Error('nope'))
      },
<<<<<<< HEAD
>>>>>>> 3eff7c172e63406dbb70d3c6ccf8d675b3138252
=======
>>>>>>> 60e4365cdd99277edacce2bf8c629e1668cfac86
    })

    pool.connect((err, client) => {
      expect(err).to.be.an(Error)
      expect(err.message).to.be('nope')
      pool.end()
      done()
    })
  })
})
